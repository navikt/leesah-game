---
import '../../styles/global.css'
import '../../styles/index.css'
import leaderboardImg from '../../assets/leaderboard.png'
import catSleepingGif from '../../assets/cat_sleeping.gif'
import megamanGif from '../../assets/megaman.gif'
import { getCollection } from 'astro:content'
import LanguagePicker from '../../components/LanguagePicker.astro'
import { getLangFromUrl, useTranslations } from '../../i18n/utils'
import Header from "../../components/Header/Header.astro";

const lang = getLangFromUrl(Astro.url)
const t = useTranslations(lang)

let oppgaverSider = await getCollection('oppgaver')
// Flytter lagregistrering til 친 v칝re f칮rst i listen
oppgaverSider.sort((side) => (side.data.title === 'lagregistrering' ? -1 : 0))
---

<html lang={`${lang}`}>
<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/cat.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Leesah Game</title>
</head>
<body>
<main>
    <Header />
    <div class="ingress-container">
        <div class="text-container">
            <p>
                Leesah Game er et hendelsedrevet applikasjonsutviklingspill som utfordrer spillerne til 친 bygge
                en hendelsedrevet applikasjon. Applikasjonen h친ndterer forskjellige typer oppgaver som den
                mottar som hendelser p친 en Kafka-basert hendelsestr칮m. Oppgavene varierer fra veldig enkle til
                mer komplekse.
            </p>
            <img class="cat-sleeping" src={catSleepingGif.src} alt={t('alt.sleeping_cat')} />
        </div>
        <img src={leaderboardImg.src} alt={t('alt.leesah-leaderboard')} />
    </div>

    <p>
        Nav bygger i stor grad alle nye systemer som hendelsedrevet, og form친let med Leesah Game er at spillerne
        skal f친 en bedre forst친else for hvordan man bygger hendelsedrevne applikasjoner. Man f친r ogs친 et
        innblikk i fordeler og ulemper med slike systemer. Dessuten er det innmari moro!
    </p>

    <div>
        <h2>Kom i gang</h2>
        <p>
            Vi har laget biblioteker i flere forskjellige spr친k, s친 her er det bare 친 velge det du liker best.
            Hvert bibliotek vil ha sin egen dokumentasjon for hvordan man kommer i gang.
        </p>
        <ul>
            <li>
                <a href="https://pypi.org/project/leesah-game/">Python 游냀</a>
            </li>
            <li>
                <a href="https://www.npmjs.com/package/@navikt/leesah-game">JavaScript</a>
            </li>
            <li>
                <a href="https://pkg.go.dev/github.com/navikt/go-leesah">Go</a>
            </li>
        </ul>
    </div>

    <div>
        <h2>Dokumentasjon om oppgavene</h2>
        <p>
            Oppgavene du kan m칮te i Leesah Game er som f칮lger, og de kommer ikke n칮dvendigvis i rekkef칮lgen til
            listen.
        </p>
        <ul>
            {
                oppgaverSider
                    .filter((side) => !side.slug.includes('nais'))
                    .filter((side) => !side.data.title.includes('deduplisering'))
                    .map((side) =>
                        side.data.title === 'lagregistrering' ? (
                                <li>
                                    <a href={`/oppgaver/${side.slug}/`}>{side.data.title}</a> (F칮rste oppgaven som
                                    alltid m친 gj칮res f칮r man kan l칮se andre oppgaver)
                                </li>
                        ) : (
                                <li>
                                    <a href={`/oppgaver/${side.slug}/`}>{side.data.title}</a>
                                </li>
                        )
                    )
            }
        </ul>
        <p>NAIS spesifike oppgaver:</p>
        <ul>
            {
                oppgaverSider
                    .filter((side) => side.slug.includes('nais/'))
                    .map((side) => (
                            <li>
                                <a href={`/oppgaver/${side.slug}/`}>{side.data.title}</a>
                            </li>
                    ))
            }
        </ul>
    </div>

    <div class="lenkemeny">

        <a class="lenkemeny-element" href={`/leesah/leesah-kurs`}>
            <img src={megamanGif.src} height="100" alt={t('alt.megaman')} />
            <h2 class="lenkemeny-element-heading">{t('nav.leesah-play')} --></h2>
        </a>
    </div>
</main>
<footer>
    <LanguagePicker />
</footer>
</body>
</html>
