---
import "../styles/globals.css";
import "./index.css";
import Header from "../components/Header/Header.astro";
import leaderboardImg from "./leaderboard.png";
import catSleepingGif from "./cat_sleeping.gif";

const oppsettSider = Object.values(await import.meta.glob('./oppsett/*.md', { eager: true }))

// Flytter team-registration til å være først i listen
const oppgaveSider = Object.values(await import.meta.glob('./oppgaver/*.md', { eager: true })).sort(side => side.frontmatter.title === 'team-registration' ? -1 : 0 )

const naisOppgaveSider = Object.values(await import.meta.glob('./oppgaver/nais/*.md', { eager: true }))
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Leesah Game</title>
	</head>
	<body>
		<main>
			<Header tittel="livet er en strøm av hendelser" />
			<div class="ingress-container">
				<div class="text-container">
					<p>
						Leesah Game er et hendelsedrevet applikasjonsutviklingspill
						som utfordrer spillerne til å bygge en hendelsedrevet
						applikasjon. Applikasjonen håndterer forskjellige typer
						oppgaver som den mottar som hendelser på en Kafka-basert
						hendelsestrøm. Oppgavene varierer fra veldig enkle til mer
						komplekse.
					</p>
					<img class="cat-sleeping" src={catSleepingGif.src} alt="Gif av en katt som sover" />
				</div>
				<img
					src={leaderboardImg.src}
					alt="Illustrasjon over leaderboardet i et spill av leesah."
				/>
				<p>
					NAV bygger i stor grad alle nye systemer som hendelsedrevet, og
					formålet med Leesah Game er at spillerne skal få en bedre forståelse
					for hvordan man bygger hendelsedrevne applikasjoner. Man får også et
					innblikk i fordeler og ulemper med slike systemer. Dessuten er det
					innmari moro!
				</p>
			</div>

			<div>
				<h3>Kom i gang</h3>
				<p>
					Vi har to versjoner av Leesah Game, en hvor man lærer å deploye en
					applikasjon på Nais-plattformen, og en hvor man kjører lokalt. Disse
					to forskjellige versjonene har også to forskjellige kodebaser.
				</p>
				<ul>
					{oppsettSider.map(oppsettSide => <li><a href={oppsettSide.url}>{oppsettSide.frontmatter.title}</a></li>)}
				</ul>
			</div>
			<div>
				<h3>Dokumentasjon om oppgavene</h3>
				<p>
					Oppgavene du kan møte i Leesah Game er som følger, og de kommer ikke
					nødvendigvis i rekkefølgen til listen.
				</p>
				<ul>
					{oppgaveSider.map(oppgaveSide => oppgaveSide.frontmatter.title === 'team-registration' ? (
						<li>
							<a href={oppgaveSide.url}>{oppgaveSide.frontmatter.title}</a> (Første oppgaven som alltid må
							gjøres før man kan løse andre oppgaver)
						</li>
					) : (
						<li>
							<a href={oppgaveSide.url}>{oppgaveSide.frontmatter.title}</a>
						</li>
					))}
				</ul>
				<p>NAIS spesifike oppgaver:</p>
				<ul>
					{naisOppgaveSider.map(naisOppgaveSide => <li><a href={naisOppgaveSide.url}>{naisOppgaveSide.frontmatter.title}</a></li>)}
				</ul>
			</div>
		</main>
	</body>
</html>
